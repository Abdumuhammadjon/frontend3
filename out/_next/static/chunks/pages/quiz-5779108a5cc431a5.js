(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[587],{6983:(e,a,t)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/quiz",function(){return t(8450)}])},8450:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>c});var l=t(4848),s=t(6540),i=t(6715),n=t(4335);let r=e=>{let{question:a,selectedOptions:t,handleOptionChange:s}=e;return(0,l.jsxs)("div",{className:"p-4 border-b",children:[(0,l.jsx)("p",{className:"font-bold text-lg text-gray-900",children:a.question_text}),a.options&&a.options.length>0?(0,l.jsx)("ul",{className:"mt-2 space-y-2",children:a.options.map(e=>{var i;return(0,l.jsxs)("li",{className:"ml-4 flex items-center",children:[(0,l.jsx)("input",{type:"radio",name:"question-".concat(a.id),value:e.id,checked:(null===(i=t[a.id])||void 0===i?void 0:i.variantId)===e.id,onChange:()=>s(a.id,e.id,e.option_text),className:"mr-2"}),(0,l.jsx)("span",{className:"p-3 rounded-lg bg-gray-100 border border-gray-300 w-full text-gray-800 text-base font-medium hover:bg-gray-200 transition-all duration-200",children:e.option_text})]},e.id)})}):(0,l.jsx)("p",{className:"text-gray-600 mt-2",children:"Javob variantlari mavjud emas"})]})},d=e=>new Date(e).toLocaleDateString("en",{day:"2-digit",month:"long",year:"numeric"}),o=e=>{let a={};return e.forEach(e=>{let t=new Date(e.created_at).toISOString().slice(0,10);a[t]||(a[t]=[]),a[t].push(e)}),a};function c(){let e=(0,i.useRouter)(),[a,t]=(0,s.useState)([]),[c,u]=(0,s.useState)({}),[m,h]=(0,s.useState)(null),[g,x]=(0,s.useState)(null),[b,p]=(0,s.useState)({}),[y,v]=(0,s.useState)(!1),[j,w]=(0,s.useState)(null);(0,s.useEffect)(()=>{(async()=>{v(!0);try{let e=await n.A.get("https://backed1.onrender.com/api/subjects");t(e.data)}catch(e){w("Fanlarni yuklashda xatolik yuz berdi")}finally{v(!1)}})()},[]);let f=async e=>{v(!0),w(null),p({}),x(null);try{let a=await n.A.get("https://backed1.onrender.com/api/subject/".concat(e));h(e),u(o(a.data))}catch(e){w("Savollarni yuklashda xatolik yuz berdi")}finally{v(!1)}},N=(e,a,t)=>{p(l=>({...l,[e]:{questionId:e,variantId:a,variantText:t}}))},k=async()=>{let a=localStorage.getItem("userId");if(!a){alert("Foydalanuvchi ID topilmadi. Iltimos, tizimga kiring!");return}if(!m){alert("Fanni tanlang!");return}let t=Object.values(b).map(e=>{let{questionId:a,variantId:t}=e;return{questionId:a,variantId:t}});if(0===t.length){alert("Iltimos, hech bo‘lmaganda bitta javob belgilang!");return}try{await n.A.post("https://backed1.onrender.com/api/save-answers",{answers:t,userId:a,subjectId:m}),alert("Javoblar muvaffaqiyatli saqlandi!"),e.push({pathname:"/Natija",query:{subjectId:m}})}catch(e){alert("Javoblarni saqlashda xatolik yuz berdi")}};return(0,l.jsxs)("div",{className:"min-h-screen bg-gray-100 flex flex-col items-center p-6",children:[(0,l.jsx)("h1",{className:"text-3xl font-bold text-blue-700 mb-6",children:"Fanlar ro‘yxati"}),j&&(0,l.jsxs)("p",{className:"text-red-500 mb-4",children:["Xatolik: ",j]}),(0,l.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 w-full max-w-4xl",children:a.map(e=>(0,l.jsx)("button",{className:"bg-blue-500 text-white px-6 py-3 rounded-lg shadow-md hover:bg-blue-600 transition",onClick:()=>f(e.id),children:e.name},e.id))}),m&&(0,l.jsxs)("div",{className:"mt-6 w-full max-w-4xl bg-white p-6 rounded-lg shadow-md",children:[(0,l.jsx)("h2",{className:"text-2xl font-semibold text-gray-800 mb-4",children:"Savollar sanasi bo‘yicha"}),(0,l.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:Object.keys(c).sort().map(e=>(0,l.jsx)("button",{onClick:()=>x(e),className:"bg-gray-200 p-3 rounded-lg shadow-md hover:bg-gray-300 transition",children:d(e)},e))})]}),g&&c[g]&&(0,l.jsxs)("div",{className:"mt-6 w-full max-w-4xl bg-white p-6 rounded-lg shadow-md",children:[(0,l.jsx)("h2",{className:"text-2xl font-semibold text-gray-800 mb-4",children:"Savollar"}),c[g].map(e=>(0,l.jsx)(r,{question:e,selectedOptions:b,handleOptionChange:N},e.id)),(0,l.jsx)("button",{onClick:k,className:"mt-4 bg-green-500 text-white px-6 py-3 rounded-lg shadow-md hover:bg-green-600 transition",children:"Javoblarni Saqlash"})]})]})}}},e=>{var a=a=>e(e.s=a);e.O(0,[636,593,792],()=>a(6983)),_N_E=e.O()}]);