(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[482],{7255:(e,a,s)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/results",function(){return s(4980)}])},5452:(e,a,s)=>{"use strict";s.d(a,{A:()=>l});let l=(0,s(3943).A)("ChartNoAxesColumnIncreasing",[["line",{x1:"12",x2:"12",y1:"20",y2:"10",key:"1vz5eb"}],["line",{x1:"18",x2:"18",y1:"20",y2:"4",key:"cun8e5"}],["line",{x1:"6",x2:"6",y1:"20",y2:"16",key:"hq0ia6"}]])},8357:(e,a,s)=>{"use strict";s.d(a,{A:()=>l});let l=(0,s(3943).A)("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]])},7414:(e,a,s)=>{"use strict";s.d(a,{A:()=>l});let l=(0,s(3943).A)("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]])},4909:(e,a,s)=>{"use strict";s.d(a,{A:()=>l});let l=(0,s(3943).A)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},4980:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>p});var l=s(4848),t=s(6540),r=s(4335),i=s(6715),n=s(7414),c=s(8357),o=s(4909),d=s(5452),u=s(3943);let h=(0,u.A)("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);var x=s(7034);let m=(0,u.A)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),p=e=>{let{subjectId:a}=e,[s,u]=(0,t.useState)({}),[p,y]=(0,t.useState)(null),[g,v]=(0,t.useState)(!1),[b,j]=(0,t.useState)(null),[k,f]=(0,t.useState)(!1),[N,w]=(0,t.useState)(!1),A=(0,i.useRouter)();(0,t.useEffect)(()=>{let e=localStorage.getItem("subjectId"),s=a||e;s?(w(!0),S(s)):A.push("/Login")},[a,A]);let S=async e=>{v(!0);try{let a=(await r.A.get("https://backed1.onrender.com/api/subject/".concat(e),{headers:{"Content-Type":"application/json"}})).data.reduce((e,a)=>{let s=new Date(a.created_at).toISOString().split("T")[0];return e[s]||(e[s]=[]),e[s].push(a),e},{});u(a),j(null)}catch(e){var a,s;j((null===(s=e.response)||void 0===s?void 0:null===(a=s.data)||void 0===a?void 0:a.error)||"Savollarni yuklashda xatolik")}finally{v(!1)}},z=async(e,a)=>{if(window.confirm("Bu savolni o'chirishni xohlaysizmi?"))try{await r.A.delete("https://backed1.onrender.com/api/question/".concat(e),{headers:{"Content-Type":"application/json"}}),u(s=>{let l={...s};return l[a]=l[a].filter(a=>a.id!==e),0===l[a].length&&delete l[a],l}),j(null)}catch(e){var s,l;j((null===(l=e.response)||void 0===l?void 0:null===(s=l.data)||void 0===s?void 0:s.error)||"Savolni o'chirishda xatolik")}},_=e=>new Date(e).toLocaleDateString("uz-UZ",{year:"numeric",month:"long",day:"numeric"});return(0,l.jsxs)("div",{className:"flex flex-col -ml-5 h-screen bg-gray-100",children:[(0,l.jsx)("div",{className:"bg-white shadow-md h-16 flex items-center px-6 fixed w-full z-50 top-0",children:(0,l.jsx)("h1",{className:"text-2xl font-bold text-gray-800",children:"Savollar Bazasi"})}),(0,l.jsxs)("div",{className:"flex flex-1 pt-16",children:[(0,l.jsxs)("div",{className:"bg-gray-900 text-white fixed h-full p-5 top-16 transition-all duration-300 ".concat(k?"w-64":"w-20"),children:[(0,l.jsx)("button",{className:"text-white mb-6",onClick:()=>f(!k),children:(0,l.jsx)(n.A,{size:24})}),(0,l.jsxs)("ul",{className:"space-y-4",children:[(0,l.jsxs)("li",{className:"flex items-center gap-3 hover:bg-gray-700 p-2 rounded-lg cursor-pointer",onClick:()=>{A.push("/questions")},children:[(0,l.jsx)(c.A,{size:24})," ",k&&"Bosh sahifa"]}),(0,l.jsxs)("li",{className:"flex items-center gap-3 hover:bg-gray-700 p-2 rounded-lg cursor-pointer",onClick:()=>{A.push("/results")},children:[(0,l.jsx)(o.A,{size:24})," ",k&&"Foydalanuvchilar"]}),(0,l.jsxs)("li",{className:"flex items-center gap-3 hover:bg-gray-700 p-2 rounded-lg cursor-pointer",onClick:()=>{A.push("/UserResults")},children:[(0,l.jsx)(d.A,{size:24})," ",k&&"Hisobotlar"]}),(0,l.jsxs)("li",{className:"flex items-center gap-3 hover:bg-gray-700 p-2 rounded-lg cursor-pointer",children:[(0,l.jsx)(h,{size:24})," ",k&&"Sozlamalar"]}),(0,l.jsx)("br",{}),(0,l.jsx)("br",{}),N&&(0,l.jsxs)("li",{className:"flex items-center gap-3 hover:bg-gray-700 p-2 rounded-lg cursor-pointer",onClick:()=>{document.cookie.split(";").forEach(function(e){let a=e.split("=")[0].trim();document.cookie=a+"=;expires=Thu, 01 Jan 1970 00:00:00 GMT;path=/"}),localStorage.clear(),sessionStorage.clear(),w(!1),A.push("/Login")},children:[(0,l.jsx)(x.A,{size:24})," ",k&&"Chiqish"]})]})]}),(0,l.jsx)("div",{className:"flex-1 p-6 transition-all duration-300 ".concat(k?"ml-64":"ml-20"),children:g?(0,l.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,l.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):b?(0,l.jsxs)("div",{className:"text-center p-4 text-red-600 bg-red-100 rounded-lg shadow-md",children:["Xatolik: ",b]}):(0,l.jsx)("div",{className:"max-w-4xl mx-auto space-y-6",children:Object.keys(s).sort().map(e=>(0,l.jsxs)("div",{className:"mb-4 w-full",children:[(0,l.jsx)("button",{onClick:()=>y(p===e?null:e),className:"w-full bg-blue-500 text-white px-6 py-3 rounded-lg shadow-md hover:bg-blue-600 transition-colors duration-200",children:_(e)}),p===e&&(0,l.jsx)("div",{className:"mt-2 p-4 bg-white rounded-lg shadow-md",children:s[e].map((a,s)=>(0,l.jsxs)("div",{className:"mb-4 border-b pb-2 last:border-b-0",children:[(0,l.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,l.jsx)("p",{className:"text-gray-600 font-medium",children:"Savol:"}),(0,l.jsx)("button",{onClick:()=>z(a.id,e),className:"text-red-600 hover:text-red-800 transition-colors duration-200",title:"Savolni o'chirish",children:(0,l.jsx)(m,{size:20})})]}),(0,l.jsxs)("div",{className:"p-3 bg-gray-50 rounded-lg",children:[(0,l.jsx)("p",{className:"font-bold text-gray-900",children:a.question_text}),(0,l.jsx)("ul",{className:"mt-2 space-y-2",children:a.options.map(e=>(0,l.jsxs)("li",{className:"p-2 rounded-lg ".concat(e.is_correct?"bg-green-100 text-green-800":"bg-gray-200 text-gray-800"),children:[e.option_text,e.is_correct&&(0,l.jsx)("span",{className:"ml-2 text-green-600 font-medium",children:"âœ“"})]},e.id))})]})]},s))})]},e))})})]})]})}}},e=>{var a=a=>e(e.s=a);e.O(0,[636,593,792],()=>a(7255)),_N_E=e.O()}]);